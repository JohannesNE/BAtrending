[{"path":"https://johannesne.github.io/BAtrending/articles/BAtrending.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Introduction to BAtrending","text":"First, install package using pak::pak(\"JohannesNE/BAtrending\") remotes::install_github(\"JohannesNE/BAtrending\"). , load package:","code":"library(BAtrending) library(dplyr)"},{"path":"https://johannesne.github.io/BAtrending/articles/BAtrending.html","id":"part-1-a-simple-example","dir":"Articles","previous_headings":"","what":"Part 1: A simple example","title":"Introduction to BAtrending","text":"BAtrending package includes small sample dataset, CO. contains paired measurements cardiac output (CO) using two methods: radionuclide ventriculography (rv) impedance cardiography (ic). dataset published Bland JM, Altman DG. (1999) Measuring agreement method comparison studies. Statistical Methods Medical Research 8, 135-160. CO dataset contains 60 measurements 12 subjects. compare_methods() primary analysis function BAtrending. compare_methods() uses lme4::lmer() fit mixed model differences (alt - ref) dependent variable. model, Bland-Altman statistics trending parameters calculated, accounting repeated measurements. Additionally, mixed model averages ((alt + ref)/2) dependent variable fit. model used determine -subject within-subject variation measured variable. Part 3 demonstrate manually fit mixed model extract relevant features. can view raw data (rv ic) using plot_BA_scatter(). generally recommended set aspect ratio 1 easy comparison methods.  standard Bland-Altman plot created plot_BA().  plot_BA_combine() convenience function combines three plots: scatter plot Bland-Altman plots shown , residuals plot. residuals plot shows within-subject variation, variation relevant assessing trending agreement.  Setting equal_scales = TRUE (default) matches dimensions residuals plot standard Bland-Altman plot, can visually compare within-subject variation (right panel) total variation shown Bland-Altman analysis (middle panel). residuals plot (right panel, displaying within-subject variation) can also created directly plot_BA_residuals(). Y-axis residuals plot, observe little within-subject variation difference simultaneous measurements, especially compared total variation (Y-axis middle panel). , suggests good trending agreement, must also consider variation CO . average CO ((rv+ic)/2(rv+ic)/2) represents best guess true CO, plotted X-axis middle right panels. middle panel shows wide range CO values included study, right panel reveals within-subject variation CO limited. know within-subject variability might change CO changes significantly; therefore, confidently interpret low within-subject variability “good” trending agreement. results analysis can shown table form console print(BA_CO) simply calling object name: publication-ready table created : BA_table() uses tinytable::tt() can exported several common formats including PDF .docx (see tinytable::save_tt() ).","code":"head(CO) #>   sub   rv   ic #> 1   1 7.83 6.57 #> 2   1 7.42 5.62 #> 3   1 7.89 6.90 #> 4   1 7.12 6.57 #> 5   1 7.88 6.35 #> 6   2 6.16 4.06 BA_CO <- compare_methods(   CO,   ref_col = rv,   alt_col = ic,   id_col = sub ) # Bootstrap confidence intervals. # `nsim` should probably be at least 2000 in practice. BA_CO <- add_confint(BA_CO, nsim = 999, .progress = \"none\") plot_BA_scatter(BA_CO, aspect_ratio = 1) plot_BA(BA_CO, aspect_ratio = 1) plot_BA_combine(BA_CO, aspect_ratio = 1, equal_scales = TRUE) BA_CO #> 60 paired measurements in 12 subjects #>  #>                                    est      [95% CI]  #> === Distribution === #> Mean                           :   5.035 [ 4.314;  5.716]  #> Between-subject variation (SD) :   1.210 [ 0.711;  1.693]  #> Within-subject variation (SD)  :   0.283 [ 0.224;  0.338]  #> Total variation (SD)           :   1.243 [ 0.765;  1.722]  #>  #> === Method comparison === #> Bias (alt - ref)               :  -0.705 [-1.248; -0.183]  #> Between-subject variation (SD) :   0.934 [ 0.522;  1.355]  #> Within-subject variation (SD)  :   0.413 [ 0.326;  0.495]  #> Total variation (SD)           :   1.022 [ 0.661;  1.408]  #> Intraclass correlation #> └ Between/Total variance       :   0.836 [ 0.609;  0.925]  #> Limits of agreement (95%) #> ├ Upper limit                  :   1.298 [ 0.352;  2.135]  #> └ Lower limit                  :  -2.707 [-3.602; -1.847]  #> Percentage error               :   0.398 [ 0.258;  0.550]  #>  #> --- Trending --- #> Within-subject perc. error     :   0.161 [ 0.127;  0.193]  #> Change LoA [±] (95%)           :   1.146 [ 0.902;  1.372] BA_table(BA_CO)"},{"path":"https://johannesne.github.io/BAtrending/articles/BAtrending.html","id":"part-2-proportional-errors---logarithmic-transformation","dir":"Articles","previous_headings":"","what":"Part 2: Proportional errors - logarithmic transformation","title":"Introduction to BAtrending","text":"example , assumed measurement errors independent true CO. assumption supported Bland-Altman plot residuals plots, indicate relationship average CO variation measurement differences. , however, common encounter data prior knowledge suggesting measurement errors increase proportionally measured value. following section, simulate simultaneous measurements CO two methods measurement errors proportional true CO. First, simulate 5 true CO values 50 subjects. BAtrending provides convenience function, simulate_repeated_data(), purpose.  Now, simulate measurements true CO using function simulate_measurement(): first perform Bland-Altman analysis absolute (non-log) scale.  funnel-shaped scatter differences Bland-Altman plot (middle panel) clearly indicates magnitude differences increases higher CO. instead perform analysis log-transformed measurements. corresponds assumption measurement errors proportional true CO. Specifically, ratios simultaneous measurements two methods independent true CO. log(alt)−log(ref)=log(altref) \\log(alt) - \\log(ref) = \\log\\left(\\frac{alt}{ref} \\right)  log-transformed measurements, relationship CO agreement methods (course, expected, generated data proportional errors). results Bland-Altman analysis log-transformed measurements (e.g. bias, limits agreement, change limits agreement) can exponentiated interpreted original scale. interpretation back-transformed results estimate ratios measurements instead absolute differences.  ratio 1 signifies “bias” (alt=refalt = ref). Y-axis shown logarithmic intervals appropriately balance ratios visually (.e. increase 25% balanced decrease 20%). relative bias 1.08 indicates alternative method measures 8% reference method average. Relative limits agreement define interval ratios future paired measurements (random subject) alternative reference methods expected fall 95% cases. can also show results log-transformed Bland-Altman analysis non-transformed data :  , can generate table back-transformed (exponentiated) results: back-transformed change limits agreement 1.23. interpreted : measure change CO methods simultaneously, expect change one method 23% higher method 95% cases. Percentage errors meaningful log-transformed data, also needed. Bland-Altman analysis log-transformed data inherently gives measures agreement relative measured value. compare results analysis log-transformed measurements analysis absolute (non-transformed) measurements, SD differences log-transformed measurements (Dlog=log(COalt)−log(COref)D_{\\log} = \\log(CO_{alt}) - \\log(CO_{ref})) approximately equal SD differences original measurements (DD) relative mean measurements: SD(Dlog)≈SD(D)mean(COalt,COref), SD(D_{\\log}) \\approx \\frac{SD(D)}{mean(CO_{alt}, CO_{ref})}, SD(Dlog)SD(D_{\\log}) less approximately 0.3. Note log\\log must natural logarithm (base ee) approximate equality hold. Thus, 1.96*SDtotal1.96 * SD_{total} log scale approximately equal “percentage error” calculated original scale. analogous coefficient variation (CV=SD(x)/mean(x)CV = SD(x)/mean(x)) approximately equal SD(log(x))SD(log(x))1.","code":"set.seed(1)  sim_CO <- simulate_repeated_data(   n_sub = 50, # subjects   n_rep = 5, # repetitions   avg = 5, # Overall average CO.   # Between-subject variation in CO   between_sub_sd = 0.5,   # Within-subject variation in CO (relative to the mean CO for the subject).   within_sub_rel_change_sd = 0.3,   var_name = \"co_true\" ) head(sim_CO) #>   id  co_true #> 1  1 5.281320 #> 2  1 3.900623 #> 3  1 5.191799 #> 4  1 3.339882 #> 5  1 7.204108 #> 6  2 9.223510  hist(sim_CO$co_true, breaks = 10) sim_CO <- sim_CO |>   mutate(     # Reference method     ref = simulate_measurement(       true_val = co_true,       sub_id = id,       mean_bias = log(1), # 0, no bias.       # between-subject variation of 5% of true CO.       sub_bias_sd = log(1.05),       # within-subject variation of 5% of true CO.       residual_error_sd = log(1.05),       relative_errors = TRUE     ),     # Alternative method     alt = simulate_measurement(       true_val = co_true,       sub_id = id,       mean_bias = log(1.1), # 10% higher than true CO.       # between-subject variation of 10% of true CO.       sub_bias_sd = log(1.1),       # within-subject variation of 5% of true CO.       residual_error_sd = log(1.05),       relative_errors = TRUE     )   )  head(sim_CO) #>   id  co_true      ref       alt #> 1  1 5.281320 5.928015  5.640380 #> 2  1 3.900623 4.211349  3.989880 #> 3  1 5.191799 5.524657  6.044544 #> 4  1 3.339882 3.456067  3.316707 #> 5  1 7.204108 8.127387  7.766766 #> 6  2 9.223510 9.022741 10.143470 BA_sim_abs <- compare_methods(   sim_CO,   ref_col = ref,   alt_col = alt,   id_col = id ) # Increase nsim in practice. BA_sim_abs <- add_confint(BA_sim_abs, nsim = 999, .progress = \"none\")  plot_BA_combine(BA_sim_abs, aspect_ratio = 1) BA_sim_log <- compare_methods(   sim_CO,   ref_col = ref,   alt_col = alt,   id_col = id,   logtrans = TRUE )  BA_sim_log <- add_confint(BA_sim_log, nsim = 999, .progress = \"none\") # Increase nsim in practice.  plot_BA_combine(BA_sim_log, aspect_ratio = 1, keep_log_scale = TRUE) # aspect_ratio only affects the scatter plot (left panel) for # log-transformed data. plot_BA_combine(BA_sim_log, aspect_ratio = 1, keep_log_scale = FALSE) plot_BA_normalized_log(BA_sim_log, aspect_ratio = 1) BA_table(BA_sim_log, keep_log_scale = FALSE)"},{"path":"https://johannesne.github.io/BAtrending/articles/BAtrending.html","id":"part-3-manually-fit-the-mixed-model-and-extract-features","dir":"Articles","previous_headings":"","what":"Part 3: Manually fit the mixed model and extract features","title":"Introduction to BAtrending","text":"BAtrending conveniently fits mixed effects model extracts relevant variables, useful understand manually. use CO dataset , use lme4::lmer() fit model used compare_methods(). First, calculate difference average pair simultaneous measurements. can see bias (fixed effect) -0.70, -subject SD 0.93 within-subject (Residual) SD 0.41. extract values programmatically, use: Bland-Altman statistics calculated values: Percentage errors also require knowing mean measurements. , use simple mean measurements. compare_methods() mean value estimated mixed model accounts repeated measurements within subjects (avg ~ 1 + (1|sub)). model also used describing distribution measurements (e.g. BA_CO$distribution_stats). calculate confidence intervals (CI) Bland-Altman statistics, can use parametric bootstrap model. calculate CIs percentage errors, since requires estimate mean CO, part mixed model. BAtrending, CIs percentage error calculated scaling CI sd.total, treating mean CO known value. Ideally, uncertainty mean CO included CI percentage error.","code":"CO_diff_avg <- mutate(CO, diff = ic - rv, avg = (ic + rv) / 2) head(CO_diff_avg) #>   sub   rv   ic  diff   avg #> 1   1 7.83 6.57 -1.26 7.200 #> 2   1 7.42 5.62 -1.80 6.520 #> 3   1 7.89 6.90 -0.99 7.395 #> 4   1 7.12 6.57 -0.55 6.845 #> 5   1 7.88 6.35 -1.53 7.115 #> 6   2 6.16 4.06 -2.10 5.110 library(lme4)  mod <- lmer(diff ~ 1 + (1 | sub), data = CO_diff_avg) summary(mod) #> Linear mixed model fit by REML ['lmerMod'] #> Formula: diff ~ 1 + (1 | sub) #>    Data: CO_diff_avg #>  #> REML criterion at convergence: 103.1 #>  #> Scaled residuals:  #>      Min       1Q   Median       3Q      Max  #> -2.19408 -0.62492 -0.08043  0.57449  2.15307  #>  #> Random effects: #>  Groups   Name        Variance Std.Dev. #>  sub      (Intercept) 0.8728   0.9342   #>  Residual             0.1708   0.4133   #> Number of obs: 60, groups:  sub, 12 #>  #> Fixed effects: #>             Estimate Std. Error t value #> (Intercept)  -0.7045     0.2752   -2.56 bias <- fixef(mod)[[1]] # Get intercept from model # Get variance components (SD) sd_components <- as.data.frame(VarCorr(mod))[['sdcor']] calc_BA_stats_from_model <- function(m) {   bias <- fixef(m)[[1]] # Get intercept from model   # Get variance components (SD)   sd_components <- as.data.frame(VarCorr(m))[['sdcor']]    sd.between <- unname(sd_components[1])   sd.within <- unname(sd_components[2])   sd.total <- sqrt(sd.between^2 + sd.within^2)    intraclass.correlation <- sd.between^2 / sd.total^2    loa.lwr <- bias - 1.96 * sd.total   loa.upr <- bias + 1.96 * sd.total    change.loa <- 1.96 * sqrt(2) * sd.within    c(     bias = bias,     sd.between = sd.between,     sd.within = sd.within,     sd.total = sd.total,     intraclass.correlation = intraclass.correlation,     loa.lwr = loa.lwr,     loa.upr = loa.upr,     change.loa = change.loa   ) }  ba_stats <- calc_BA_stats_from_model(mod) ba_stats #>                   bias             sd.between              sd.within  #>             -0.7045210              0.9342410              0.4132823  #>               sd.total intraclass.correlation                loa.lwr  #>              1.0215716              0.8363349             -2.7068013  #>                loa.upr             change.loa  #>              1.2977593              1.1455601 mean_val <- mean(CO_diff_avg$avg)  percentage.error <- 1.96 * ba_stats[\"sd.total\"] / mean_val percentage.error.within <- 1.96 * ba_stats[\"sd.within\"] / mean_val  c(   percentage.error = percentage.error,   percentage.error.within = percentage.error.within ) #>         percentage.error.sd.total percentage.error.within.sd.within  #>                         0.3986290                         0.1612675 lme4::confint.merMod(   mod,   FUN = calc_BA_stats_from_model,   level = 0.95,   method = \"boot\",   nsim = 500, # increase nsim for actual analysis   boot.type = \"perc\",   .progress = \"none\" # hide progress bar ) #>                             2.5 %     97.5 % #> bias                   -1.2616162 -0.1721710 #> sd.between              0.5359167  1.3309683 #> sd.within               0.3256488  0.4931277 #> sd.total                0.6713923  1.3912518 #> intraclass.correlation  0.6049251  0.9216700 #> loa.lwr                -3.5809664 -1.8254782 #> loa.upr                 0.3849381  2.2180610 #> change.loa              0.9026523  1.3668804"},{"path":"https://johannesne.github.io/BAtrending/articles/BAtrending.html","id":"bootstrap-confidence-intervals","dir":"Articles","previous_headings":"","what":"Bootstrap confidence intervals","title":"Introduction to BAtrending","text":"calculate confidence intervals (CI) Bland-Altman statistics, can use parametric bootstrap model. calculate CIs percentage errors, since requires estimate mean CO, part mixed model. BAtrending, CIs percentage error calculated scaling CI sd.total, treating mean CO known value. Ideally, uncertainty mean CO included CI percentage error.","code":"lme4::confint.merMod(   mod,   FUN = calc_BA_stats_from_model,   level = 0.95,   method = \"boot\",   nsim = 500, # increase nsim for actual analysis   boot.type = \"perc\",   .progress = \"none\" # hide progress bar ) #>                             2.5 %     97.5 % #> bias                   -1.2616162 -0.1721710 #> sd.between              0.5359167  1.3309683 #> sd.within               0.3256488  0.4931277 #> sd.total                0.6713923  1.3912518 #> intraclass.correlation  0.6049251  0.9216700 #> loa.lwr                -3.5809664 -1.8254782 #> loa.upr                 0.3849381  2.2180610 #> change.loa              0.9026523  1.3668804"},{"path":"https://johannesne.github.io/BAtrending/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Johannes Enevoldsen. Author, maintainer.","code":""},{"path":"https://johannesne.github.io/BAtrending/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"YourLastName Y, CoauthorLastName C (2023). “BATrending paper.” Journal Important Research, 10(2), 123–456. doi:10.xxxx/.paper.doi..","code":"@Article{,   title = {BATrending paper},   author = {YourFirstName YourLastName and CoauthorFirstName CoauthorLastName},   journal = {Journal of Important Research},   year = {2023},   volume = {10},   number = {2},   pages = {123--456},   doi = {10.xxxx/your.paper.doi.here}, }"},{"path":"https://johannesne.github.io/BAtrending/index.html","id":"batrending-","dir":"","previous_headings":"","what":"Bland-Altman Analysis and Trending Assessment","title":"Bland-Altman Analysis and Trending Assessment","text":"package conveniently conducting Bland-Altman including assessment trending ability.","code":""},{"path":"https://johannesne.github.io/BAtrending/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Bland-Altman Analysis and Trending Assessment","text":"can install BAtrending GitHub : ","code":"# install.packages(\"pak\") pak::pak(\"JohannesNE/BAtrending\") devtools::install_github(\"JohannesNE/BAtrending\")"},{"path":"https://johannesne.github.io/BAtrending/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Bland-Altman Analysis and Trending Assessment","text":"BAtrending package includes small sample dataset, CO. contains paired measurements cardiac output (CO) two methods: radionuclide ventriculography (rv) impedance cardiography (ic). dataset published Bland JM, Altman DG. (1999) Measuring agreement method comparison studies. Statistical Methods Medical Research 8, 135-160. CO dataset 60 measurements 12 subjects.  object (BA_CO) returned compare_methods() contains number parameters standard Bland-Altman analysis assessing trending ability. print() method gives overview:","code":"library(BAtrending)  BA_CO <- compare_methods(CO, ref_col = \"rv\", alt_col = \"ic\", id_col = \"sub\") # Bootstrap confidence intervals BA_CO <- add_confint(BA_CO) plot_BA_combine(BA_CO, aspect_ratio = 1) BA_CO #> 60 paired measurements in 12 subjects #>  #>                                    est      [95% CI]  #> === Distribution === #> Mean                           :   5.035 [ 4.345;  5.721]  #> Between-subject variation (SD) :   1.210 [ 0.704;  1.709]  #> Within-subject variation (SD)  :   0.283 [ 0.228;  0.340]  #> Total variation (SD)           :   1.243 [ 0.757;  1.735]  #>  #> === Method comparison === #> Bias (alt - ref)               :  -0.705 [-1.226; -0.159]  #> Between-subject variation (SD) :   0.934 [ 0.520;  1.345]  #> Within-subject variation (SD)  :   0.413 [ 0.329;  0.500]  #> Total variation (SD)           :   1.022 [ 0.660;  1.412]  #> Intraclass correlation #> └ Between/Total variance       :   0.836 [ 0.604;  0.923]  #> Limits of agreement (95%) #> ├ Upper limit                  :   1.298 [ 0.401;  2.225]  #> └ Lower limit                  :  -2.707 [-3.589; -1.818]  #> Percentage error               :   0.398 [ 0.257;  0.551]  #>  #> --- Trending --- #> Within-subject perc. error     :   0.161 [ 0.128;  0.195]  #> Change LoA [±] (95%)           :   1.146 [ 0.912;  1.385]"},{"path":"https://johannesne.github.io/BAtrending/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Bland-Altman Analysis and Trending Assessment","text":"cite package ‘BAtrending’ publications use: YourLastName Y, CoauthorLastName C (2023). “BATrending paper.” Journal Important Research, 10(2), 123-456. doi:10.xxxx/.paper.doi.https://doi.org/10.xxxx/.paper.doi.. BibTeX entry LaTeX users @Article{, title = {BATrending paper}, author = {YourFirstName YourLastName CoauthorFirstName CoauthorLastName}, journal = {Journal Important Research}, year = {2023}, volume = {10}, number = {2}, pages = {123–456}, doi = {10.xxxx/.paper.doi.}, } Please also cite ‘lme4’ package, upon ‘BAtrending’ relies heavily. See citation(\"lme4\").","code":"citation(\"BAtrending\")"},{"path":"https://johannesne.github.io/BAtrending/reference/BA_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a table with the results of the Bland-Altman analysis — BA_table","title":"Create a table with the results of the Bland-Altman analysis — BA_table","text":"Uses {tinytable}.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/BA_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a table with the results of the Bland-Altman analysis — BA_table","text":"","code":"BA_table(ba_obj, decimals = 2, decimals_pct = 1, keep_log_scale = FALSE)"},{"path":"https://johannesne.github.io/BAtrending/reference/BA_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a table with the results of the Bland-Altman analysis — BA_table","text":"ba_obj object created BAtrending::compare_methods(). decimals single numeric value specifying number decimal places estimates confidence intervals. decimals_pct single numeric value specifying number decimal places percentage statistics. keep_log_scale Show log transformed differences. FALSE (default), values parameters exponentiated.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/BA_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a table with the results of the Bland-Altman analysis — BA_table","text":"table estimates Bland-Altman analysis (uses {tinytable}).","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/CO.html","id":null,"dir":"Reference","previous_headings":"","what":"Cardiac output — CO","title":"Cardiac output — CO","text":"Cardiac output two methods, RV , 12 subjects","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/CO.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cardiac output — CO","text":"","code":"CO"},{"path":"https://johannesne.github.io/BAtrending/reference/CO.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Cardiac output — CO","text":"data frame 60 rows 3 variables: sub Subject rv Cardiac output,  radionuclide ventriculography (RV) ic Cardiac output,  impedance cardiography (IC)","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/CO.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Cardiac output — CO","text":"https://www-users.york.ac.uk/~mb55/datasets/datasets.htm","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/CO.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Cardiac output — CO","text":"Bland JM, Altman DG. (1999) Measuring agreement method comparison studies. Statistical Methods Medical Research 8, 135-160. (data provided Dr LS Bowling)","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/add_BA_stats_geom_manual.html","id":null,"dir":"Reference","previous_headings":"","what":"Manually add Bland-Altman geometry to plot — add_BA_stats_geom_manual","title":"Manually add Bland-Altman geometry to plot — add_BA_stats_geom_manual","text":"Manually add Bland-Altman geometry plot","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/add_BA_stats_geom_manual.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Manually add Bland-Altman geometry to plot — add_BA_stats_geom_manual","text":"","code":"add_BA_stats_geom_manual(   bias,   lwr,   upr,   exponentiated = FALSE,   name_ref = \"ref\",   name_alt = \"alt\",   line_labels = c(bias = \"Bias\", lwr = \"95% LoA\", upr = \"95% LoA\") )"},{"path":"https://johannesne.github.io/BAtrending/reference/add_BA_stats_geom_manual.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Manually add Bland-Altman geometry to plot — add_BA_stats_geom_manual","text":"bias, lwr, upr estimates plotted. Optionally including confidence intervals c(est, ci.lwr, ci.upr). exponentiated Set true estimates exponentiated estimates model log-transformed data. Treats estimates ratios. name_ref, name_alt Name reference alternative method. used exponentiated = TRUE line_labels Labels Bias LoA lines. Must named vector names: 'bias', 'lwr', 'upr'","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/add_confint.html","id":null,"dir":"Reference","previous_headings":"","what":"Add confidence intervals to Bland-Altman analysis object. — add_confint","title":"Add confidence intervals to Bland-Altman analysis object. — add_confint","text":"confidence intervals calculated percentile parametric bootstrap (see lme4::confint.merMod() details).","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/add_confint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add confidence intervals to Bland-Altman analysis object. — add_confint","text":"","code":"add_confint(   ba_obj,   level = 0.95,   nsim = 1999,   .progress = \"txt\",   PBargs = list(style = 3) )"},{"path":"https://johannesne.github.io/BAtrending/reference/add_confint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add confidence intervals to Bland-Altman analysis object. — add_confint","text":"ba_obj Bland-Altman analysis object level Confidence level (default 0.95) nsim Number bootstrap samples .progress, PBargs see lme4::bootMer()","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/add_confint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add confidence intervals to Bland-Altman analysis object. — add_confint","text":"Bland-Altman analysis object (x) added confidence intervals","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/add_confint.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add confidence intervals to Bland-Altman analysis object. — add_confint","text":"Note calculating confidence intervals percentage errors, mean value treated known value rather estimate. uncertainty estimate mean included confidence intervals percentage errors. technical limitation, since bootstrap analysis based single mixed model (diff ~ 1 + (1|id)) information mean value.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/as.data.frame.ba_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Bland-Altman analysis object to data.frame — as.data.frame.ba_analysis","title":"Convert Bland-Altman analysis object to data.frame — as.data.frame.ba_analysis","text":"Convert Bland-Altman analysis object data.frame","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/as.data.frame.ba_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Bland-Altman analysis object to data.frame — as.data.frame.ba_analysis","text":"","code":"# S3 method for class 'ba_analysis' as.data.frame(x, ...)"},{"path":"https://johannesne.github.io/BAtrending/reference/as.data.frame.ba_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Bland-Altman analysis object to data.frame — as.data.frame.ba_analysis","text":"x Bland-Altman analysis object ... used","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/compare_methods.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Bland-Altman analysis — compare_methods","title":"Create Bland-Altman analysis — compare_methods","text":"Creates Bland-Altman analysis including trending agreement dataset simultaneous measurements two methods (alt ref).","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/compare_methods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Bland-Altman analysis — compare_methods","text":"","code":"compare_methods(df, ref_col, alt_col, id_col, logtrans = FALSE, unit = NULL)"},{"path":"https://johannesne.github.io/BAtrending/reference/compare_methods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Bland-Altman analysis — compare_methods","text":"df Data frame. row contains simultaneous measurements value. ref_col name column containing reference measurements. alt_col name column containing alternative measurements. id_col name column containing unique subject id's. logtrans Log-transform measurements fitting difference model. unit Measurement unit (e.g. \"L/min\"). Currently used plots.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/compare_methods.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Bland-Altman analysis — compare_methods","text":"Bland-Altman analysis object (class ba_analysis)","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/compare_methods.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Bland-Altman analysis — compare_methods","text":"compare_methods() uses lme4::lmer() fit two mixed models: difference model describing (dis)agreement methods (alt - ref). model used calculate Bland-Altman statistics including trending parameters, accounting repeated measurements subjects. distribution model descibing distribution measured value, represented average ((alt + ref)/2). model used descibe within-subject -subject variation measured variable (e.g. cardiac output).","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/compare_methods.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Bland-Altman analysis — compare_methods","text":"","code":"data(CO) compare_methods(CO, ref_col = rv, alt_col = ic, id_col = sub) #> 60 paired measurements in 12 subjects #>  #>                                    est  #> === Distribution === #> Mean                           :   5.035   #> Between-subject variation (SD) :   1.210   #> Within-subject variation (SD)  :   0.283   #> Total variation (SD)           :   1.243   #>  #> === Method comparison === #> Bias (alt - ref)               :  -0.705   #> Between-subject variation (SD) :   0.934   #> Within-subject variation (SD)  :   0.413   #> Total variation (SD)           :   1.022   #> Intraclass correlation #> └ Between/Total variance       :   0.836   #> Limits of agreement (95%) #> ├ Upper limit                  :   1.298   #> └ Lower limit                  :  -2.707   #> Percentage error               :   0.398   #>  #> --- Trending --- #> Within-subject perc. error     :   0.161   #> Change LoA [±] (95%)           :   1.146   compare_methods(CO, ref_col = \"rv\", alt_col = \"ic\", id_col = \"sub\") # also works #> 60 paired measurements in 12 subjects #>  #>                                    est  #> === Distribution === #> Mean                           :   5.035   #> Between-subject variation (SD) :   1.210   #> Within-subject variation (SD)  :   0.283   #> Total variation (SD)           :   1.243   #>  #> === Method comparison === #> Bias (alt - ref)               :  -0.705   #> Between-subject variation (SD) :   0.934   #> Within-subject variation (SD)  :   0.413   #> Total variation (SD)           :   1.022   #> Intraclass correlation #> └ Between/Total variance       :   0.836   #> Limits of agreement (95%) #> ├ Upper limit                  :   1.298   #> └ Lower limit                  :  -2.707   #> Percentage error               :   0.398   #>  #> --- Trending --- #> Within-subject perc. error     :   0.161   #> Change LoA [±] (95%)           :   1.146"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Bland-Altman plot — plot_BA","title":"Create Bland-Altman plot — plot_BA","text":"Creates standard Bland-Altman plot Bland-Altman analysis object made compare_methods().","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Bland-Altman plot — plot_BA","text":"","code":"plot_BA(   ba_obj,   aspect_ratio = NULL,   show_subject_legend = FALSE,   keep_log_scale = FALSE )"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Bland-Altman plot — plot_BA","text":"ba_obj Bland-Altman analysis object aspect_ratio Set aspect ratio (x/y) X Y axis (sets ggplot2::coord_fixed()), Default (NULL) automatic. show_subject_legend Show legend subjects keep_log_scale Show log transformed differences. FALSE (default), values parameters exponentiated plotting","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Bland-Altman plot — plot_BA","text":"Bland-Altman plot (ggplot)","code":""},{"path":[]},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Bland-Altman plot — plot_BA","text":"","code":"ba_obj <- compare_methods(CO, ic, rv, id_col = sub) plot_BA(ba_obj) #> ℹ The Bland-Altman analysis object has no confidence intervals. #> To add confidence intervals run `ba_obj <- add_confint(ba_obj)`. (see #> `BAtrending::add_confint()` for help)"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_combine.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot all plots in extended Bland-Altman analysis. — plot_BA_combine","title":"Plot all plots in extended Bland-Altman analysis. — plot_BA_combine","text":"Creates scatter plot, standard Bland-Altman plot residuals plot assessing trending ability.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_combine.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot all plots in extended Bland-Altman analysis. — plot_BA_combine","text":"","code":"plot_BA_combine(   ba_obj,   aspect_ratio = NULL,   show_subject_legend = FALSE,   use_titles = TRUE,   equal_scales = TRUE,   keep_log_scale = FALSE,   return_as_list = FALSE )"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_combine.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot all plots in extended Bland-Altman analysis. — plot_BA_combine","text":"ba_obj Bland-Altman analysis object aspect_ratio Set aspect ratio (x/y) X Y axis (sets ggplot2::coord_fixed()), Default (NULL) automatic. show_subject_legend Show legend subjects use_titles Show default titles plots. equal_scales Plot residuals plane scale original data. keep_log_scale Show log transformed differences. FALSE (default), values parameters exponentiated plotting return_as_list Return three plots list. FALSE, plots combined using {patchwork}.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_normalized_log.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot BA estimates from log transformed data on raw data. — plot_BA_normalized_log","title":"Plot BA estimates from log transformed data on raw data. — plot_BA_normalized_log","text":"Plot BA estimates log transformed data raw data.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_normalized_log.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot BA estimates from log transformed data on raw data. — plot_BA_normalized_log","text":"","code":"plot_BA_normalized_log(   ba_obj,   show_subject_legend = FALSE,   aspect_ratio = NULL )"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_normalized_log.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot BA estimates from log transformed data on raw data. — plot_BA_normalized_log","text":"ba_obj Bland-Altman analysis object show_subject_legend Show legend subjects aspect_ratio Set aspect ratio (x/y) X Y axis (sets ggplot2::coord_fixed()), Default (NULL) automatic.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_normalized_log.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot BA estimates from log transformed data on raw data. — plot_BA_normalized_log","text":"Bland-Altman style plot relative differences plotted absolute differences.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_normalized_log.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot BA estimates from log transformed data on raw data. — plot_BA_normalized_log","text":"","code":"BA_CO <- compare_methods(CO, \"ic\", \"rv\", id_col = \"sub\", logtrans = TRUE) plot_BA_normalized_log(BA_CO) #> ℹ The Bland-Altman analysis object has no confidence intervals. #> To add confidence intervals run `BA_CO <- add_confint(BA_CO)`. (see #> `BAtrending::add_confint()` for help) #> Coordinate system already present. Adding new coordinate system, which will #> replace the existing one."},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_residuals.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot within-subject variation (model residuals) in differences and averages. — plot_BA_residuals","title":"Plot within-subject variation (model residuals) in differences and averages. — plot_BA_residuals","text":"Plot within-subject variation (model residuals) differences averages.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_residuals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot within-subject variation (model residuals) in differences and averages. — plot_BA_residuals","text":"","code":"plot_BA_residuals(   ba_obj,   aspect_ratio = NULL,   show_subject_legend = FALSE,   keep_log_scale = FALSE,   show_sd = TRUE )"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_residuals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot within-subject variation (model residuals) in differences and averages. — plot_BA_residuals","text":"ba_obj Bland-Altman analysis object aspect_ratio Set aspect ratio (x/y) X Y axis (sets ggplot2::coord_fixed()), Default (NULL) automatic. show_subject_legend Show legend subjects keep_log_scale Show log transformed differences. FALSE (default), values parameters exponentiated plotting show_sd Mark 1.96*SD (within-subject) plot (analouge 95% LoA).","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_scatter.html","id":null,"dir":"Reference","previous_headings":"","what":"Make scatter plot of paired measurements in analysis. — plot_BA_scatter","title":"Make scatter plot of paired measurements in analysis. — plot_BA_scatter","text":"Make scatter plot paired measurements analysis.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_scatter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make scatter plot of paired measurements in analysis. — plot_BA_scatter","text":"","code":"plot_BA_scatter(   ba_obj,   aspect_ratio = NULL,   show_subject_legend = FALSE,   keep_log_scale = FALSE )"},{"path":"https://johannesne.github.io/BAtrending/reference/plot_BA_scatter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make scatter plot of paired measurements in analysis. — plot_BA_scatter","text":"ba_obj Bland-Altman analysis object aspect_ratio Set aspect ratio (x/y) X Y axis (sets ggplot2::coord_fixed()), Default (NULL) automatic. show_subject_legend Show legend subjects keep_log_scale Show log transformed differences. FALSE (default), values parameters exponentiated plotting","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/print.ba_analysis.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for Bland-Altman analysis objects — print.ba_analysis","title":"Print method for Bland-Altman analysis objects — print.ba_analysis","text":"Print method Bland-Altman analysis objects","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/print.ba_analysis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for Bland-Altman analysis objects — print.ba_analysis","text":"","code":"# S3 method for class 'ba_analysis' print(x, ...)"},{"path":"https://johannesne.github.io/BAtrending/reference/print.ba_analysis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for Bland-Altman analysis objects — print.ba_analysis","text":"x Bland-Altman analysis object. ... used.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_measurement.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate measurement — simulate_measurement","title":"Simulate measurement — simulate_measurement","text":"Simulate measurement","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_measurement.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate measurement — simulate_measurement","text":"","code":"simulate_measurement(   true_val,   sub_id,   residual_error_sd,   mean_bias = 0,   sub_bias_sd = 0,   relative_errors = FALSE )"},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_measurement.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate measurement — simulate_measurement","text":"true_val numeric vector true values. sub_id factor vector representing subject IDs. Must length var_true. residual_error_sd Standard deviation residual errors. mean_bias Mean bias. sub_bias_sd Standard deviation subject-specific biases. relative_errors errors relative true value. TRUE, errors added log scale, result exponentiated. add bias 10% (true_value * 1.1), mean_bias set log(1.1). SD log(1.2) corresponds ±20%.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_measurement.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate measurement — simulate_measurement","text":"numeric vector representing simulated measurements.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_measurement.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate measurement — simulate_measurement","text":"","code":"df <- simulate_repeated_data(n_sub = 50, n_rep = 5, var_name = \"true_co\") df$ref <- simulate_measurement(   df$true_co,   df$id,   mean_bias = log(1.1),   sub_bias_sd = log(1.2),   residual_error_sd = log(1.1),   relative_errors = TRUE ) plot(df$true_co, df$ref, col=df$id) abline(a=0, b=1)"},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_repeated_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate repeated data — simulate_repeated_data","title":"Simulate repeated data — simulate_repeated_data","text":"Simulates n_rep repeated values n_sub subjects.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_repeated_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate repeated data — simulate_repeated_data","text":"","code":"simulate_repeated_data(   n_sub = 50,   n_rep = 5,   avg = 5,   between_sub_sd = 0.5,   within_sub_rel_change_sd = 0.3,   var_name = \"co_true\" )"},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_repeated_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate repeated data — simulate_repeated_data","text":"n_sub single number specifying number subjects. n_rep single number specifying number repetitions per subject. avg single number specifying average value across subjects. between_sub_sd single number specifying standard deviation subjects. within_sub_rel_change_sd single number controlling within-subject relative change variability. var_name single string specifying name simulated variable column.","code":""},{"path":"https://johannesne.github.io/BAtrending/reference/simulate_repeated_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate repeated data — simulate_repeated_data","text":"data frame containing simulated data id simulated variable.","code":""}]
